{% extends 'Admin/Header.html' %}
{% load static %}
{% block content %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View-Products</title>
</head>

<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-12">
                <div class="card shadow-sm">
                    <div class="card-header bg-secondary text-white">
                        <h5 class="mb-0"> New Complaint List</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover">
                                <thead class="table-light">
                                    <tr>
                                        <th scope="col">Sl.no</th>
                                        <th scope="col">Complaint From</th>
                                        <th scope="col">Complaint To</th>
                                        <th scope="col">Title</th>
                                        <th scope="col">Content</th>
                                        <th scope="col">Reply</th>
                                        <th scope="col">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in Complaint %}
                                    <tr>
                                        <td>{{ forloop.counter }}</td>
                                        <td>{{ i.user.user_name }}

                                            <br>{{ i.user.user_email }}
                                        </td>
                                        <td>
                                            {% if i.product.renter %}
                                            {{ i.product.renter.user_name }} <br> {{i.product.renter.renter_email}} 
                                            {% elif i.product.user  %}
                                            {{ i.product.user.user_name }} <br> {{i.product.user.user_email}} 
                                            {% endif %}

                                       
                                        </td>
                                        <td>{{ i.complaint_title }}</td>
                                        <td style="max-width: 200px; word-wrap: break-word;">{{ i.complaint_message }}
                                        </td>
                                        <td style="max-width: 200px; word-wrap: break-word;">{{ i.complaint_reply }}
                                        </td>
                                        <td>
                                            <a href="{% url 'Admin:AddReply' i.id %}" class="btn btn-sm btn-primary">Add
                                                Reply</a>
                                        </td>
                                    </tr>
                                    {% empty %}
                                    <tr>
                                        <td colspan="7" class="text-center">No complaints found.</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="card shadow-sm">
                    <div class="card-header bg-secondary text-white">
                        <h5 class="mb-0">Replied Complaints</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover">
                                <thead class="table-light">
                                    <tr>
                                        <th scope="col">Sl.no</th>
                                        <th scope="col">Complaint From</th>
                                        <th scope="col">Complaint To</th>
                                        <th scope="col">Title</th>
                                        <th scope="col">Content</th>
                                        <th scope="col">Reply</th>
                                        <th scope="col">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in Replied %}
                                    <tr>
                                        <td>{{ forloop.counter }}</td>
                                        <td>{{ i.user.user_name }}

                                            <br>{{ i.user.user_email }}
                                        </td>
                                        <td>
                                            {% if i.product.renter %}
                                            {{ i.product.renter.user_name }} <br> {{i.product.renter.renter_email}} 
                                            {% elif i.product.user  %}
                                            {{ i.product.user.user_name }} <br> {{i.product.user.user_email}} 
                                            {% endif %}

                                       
                                        </td>
                                        <td>{{ i.complaint_title }}</td>
                                        <td style="max-width: 200px; word-wrap: break-word;">{{ i.complaint_message }}
                                        </td>
                                        <td style="max-width: 200px; word-wrap: break-word;">{{ i.complaint_reply }}
                                        </td>
                                        <!-- <td>
                                            <a href="{% url 'Admin:AddReply' i.id %}" class="btn btn-sm btn-primary">Add
                                                Reply</a>
                                        </td> -->
                                    </tr>
                                    {% empty %}
                                    <tr>
                                        <td colspan="7" class="text-center">No complaints found.</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>

{% endblock content %}